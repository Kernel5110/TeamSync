PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "migrations" ("id" integer primary key autoincrement not null, "migration" varchar not null, "batch" integer not null);
INSERT INTO migrations VALUES(1,'0001_01_01_000000_create_users_table',1);
INSERT INTO migrations VALUES(2,'0001_01_01_000001_create_cache_table',1);
INSERT INTO migrations VALUES(3,'0001_01_01_000002_create_jobs_table',1);
INSERT INTO migrations VALUES(4,'2025_12_01_045040_create_carreras_table',1);
INSERT INTO migrations VALUES(5,'2025_12_01_045041_create_participantes_table',1);
INSERT INTO migrations VALUES(6,'2025_12_01_052246_create_eventos_table',1);
INSERT INTO migrations VALUES(7,'2025_12_01_055609_create_equipos_table',1);
INSERT INTO migrations VALUES(8,'2025_12_01_055610_add_equipo_id_to_participantes_table',1);
INSERT INTO migrations VALUES(9,'2025_12_01_194212_create_permission_tables',1);
CREATE TABLE IF NOT EXISTS "users" ("id" integer primary key autoincrement not null, "name" varchar not null, "email" varchar not null, "email_verified_at" datetime, "password" varchar not null, "remember_token" varchar, "created_at" datetime, "updated_at" datetime);
INSERT INTO users VALUES(1,'Admin User','admin@gmail.com','2025-12-01 20:49:33','$2y$12$nFz/Lw2kBDsVShWPvgOpwOUVc0vd82gwn/VvHpDNfuR0iZA2UwItO','DVMcAOAPFt0Ttu429sZupQie90uXwzgY4IOT3Gyyq8ueZoAYdNrV86tYgIFb','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO users VALUES(2,'Competitor User','competitor@example.com','2025-12-01 20:49:33','$2y$12$YkW3hx1245CDlYpbrJuzNOXZOIk3v.khhVQazx94mIJfx864ceVea','mTrJLuLOJc','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO users VALUES(3,'Judge User','judge@example.com','2025-12-01 20:49:33','$2y$12$dzmCUUuba/pW/xMWoDM76e3Ts100xb68LYHoyQ4lcDw02jlzvuwCS','8U7hjvL0rt','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO users VALUES(4,'bernardo vasquez','d4512161b3@gmail.com',NULL,'$2y$12$HCSa5bUyIi/7XBFqs5LpyuuEvJ1LTtLxpansliG5xSmDaP3yfOV2q',NULL,'2025-12-02 00:07:44','2025-12-02 00:07:44');
CREATE TABLE IF NOT EXISTS "password_reset_tokens" ("email" varchar not null, "token" varchar not null, "created_at" datetime, primary key ("email"));
CREATE TABLE IF NOT EXISTS "sessions" ("id" varchar not null, "user_id" integer, "ip_address" varchar, "user_agent" text, "payload" text not null, "last_activity" integer not null, primary key ("id"));
INSERT INTO sessions VALUES('F4VvnjJtQT8rcT7ywICqGYNlZgZDIcfRrYeLgaPc',4,'127.0.0.1','Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36','YTo0OntzOjY6Il90b2tlbiI7czo0MDoiUzE0dWRGemdDcUM1T01RRVVZOWNOU0hTM1lDbXY4c2ZWU29henNKdSI7czo2OiJfZmxhc2giO2E6Mjp7czozOiJvbGQiO2E6MDp7fXM6MzoibmV3IjthOjA6e319czo5OiJfcHJldmlvdXMiO2E6Mjp7czozOiJ1cmwiO3M6MjE6Imh0dHA6Ly8xMjcuMC4wLjE6ODAwMCI7czo1OiJyb3V0ZSI7czo1OiJpbmRleCI7fXM6NTA6ImxvZ2luX3dlYl81OWJhMzZhZGRjMmIyZjk0MDE1ODBmMDE0YzdmNThlYTRlMzA5ODlkIjtpOjQ7fQ==',1764634074);
CREATE TABLE IF NOT EXISTS "cache" ("key" varchar not null, "value" text not null, "expiration" integer not null, primary key ("key"));
INSERT INTO cache VALUES('laravel-cache-spatie.permission.cache','a:3:{s:5:"alias";a:4:{s:1:"a";s:2:"id";s:1:"b";s:4:"name";s:1:"c";s:10:"guard_name";s:1:"r";s:5:"roles";}s:11:"permissions";a:7:{i:0;a:4:{s:1:"a";i:1;s:1:"b";s:13:"create events";s:1:"c";s:3:"web";s:1:"r";a:1:{i:0;i:1;}}i:1;a:4:{s:1:"a";i:2;s:1:"b";s:11:"edit events";s:1:"c";s:3:"web";s:1:"r";a:1:{i:0;i:1;}}i:2;a:4:{s:1:"a";i:3;s:1:"b";s:13:"delete events";s:1:"c";s:3:"web";s:1:"r";a:1:{i:0;i:1;}}i:3;a:4:{s:1:"a";i:4;s:1:"b";s:12:"create teams";s:1:"c";s:3:"web";s:1:"r";a:2:{i:0;i:1;i:1;i:2;}}i:4;a:4:{s:1:"a";i:5;s:1:"b";s:10:"edit teams";s:1:"c";s:3:"web";s:1:"r";a:2:{i:0;i:1;i:1;i:2;}}i:5;a:4:{s:1:"a";i:6;s:1:"b";s:12:"delete teams";s:1:"c";s:3:"web";s:1:"r";a:1:{i:0;i:1;}}i:6;a:4:{s:1:"a";i:7;s:1:"b";s:12:"manage users";s:1:"c";s:3:"web";s:1:"r";a:1:{i:0;i:1;}}}s:5:"roles";a:2:{i:0;a:3:{s:1:"a";i:1;s:1:"b";s:5:"admin";s:1:"c";s:3:"web";}i:1;a:3:{s:1:"a";i:2;s:1:"b";s:10:"competidor";s:1:"c";s:3:"web";}}}',1764720277);
CREATE TABLE IF NOT EXISTS "cache_locks" ("key" varchar not null, "owner" varchar not null, "expiration" integer not null, primary key ("key"));
CREATE TABLE IF NOT EXISTS "jobs" ("id" integer primary key autoincrement not null, "queue" varchar not null, "payload" text not null, "attempts" integer not null, "reserved_at" integer, "available_at" integer not null, "created_at" integer not null);
CREATE TABLE IF NOT EXISTS "job_batches" ("id" varchar not null, "name" varchar not null, "total_jobs" integer not null, "pending_jobs" integer not null, "failed_jobs" integer not null, "failed_job_ids" text not null, "options" text, "cancelled_at" integer, "created_at" integer not null, "finished_at" integer, primary key ("id"));
CREATE TABLE IF NOT EXISTS "failed_jobs" ("id" integer primary key autoincrement not null, "uuid" varchar not null, "connection" text not null, "queue" text not null, "payload" text not null, "exception" text not null, "failed_at" datetime not null default CURRENT_TIMESTAMP);
CREATE TABLE IF NOT EXISTS "carreras" ("id" integer primary key autoincrement not null, "nombre" varchar not null, "created_at" datetime, "updated_at" datetime);
INSERT INTO carreras VALUES(1,'Ing. Sistemas','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO carreras VALUES(2,'Ing. Civil','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO carreras VALUES(3,'Ing. Electrónica','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO carreras VALUES(4,'Ing. Gestión Empresarial','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO carreras VALUES(5,'Ing. Industrial','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO carreras VALUES(6,'Ing. Mecánica','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO carreras VALUES(7,'Ing. Química','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO carreras VALUES(8,'Lic. Administración','2025-12-01 20:49:34','2025-12-01 20:49:34');
CREATE TABLE IF NOT EXISTS "eventos" ("id" integer primary key autoincrement not null, "nombre" varchar not null, "descripcion" text not null, "fecha_inicio" date not null, "fecha_fin" date not null, "ubicacion" varchar not null, "capacidad" varchar not null, "created_at" datetime, "updated_at" datetime);
INSERT INTO eventos VALUES(1,'HACKATEC','Desarrollar proyectos de base tecnológica y creativos con características de escalabilidad que incentiven las capacidades de investigación y desarrollo tecnológico en la solución de problemas.','2024-03-15 00:00:00','2024-03-17 00:00:00','Campus TecNM','50+ equipos','2025-12-01 20:49:34','2025-12-01 20:49:34');
INSERT INTO eventos VALUES(2,'INNOVATEC','Desarrollar proyectos de base tecnológica y creativos con características de escalabilidad que incentiven las capacidades de investigación y desarrollo tecnológico en la solución de problemas.','2024-04-22 00:00:00','2024-04-24 00:00:00','Centro de Innovación','40+ equipos','2025-12-01 20:49:34','2025-12-01 20:49:34');
CREATE TABLE IF NOT EXISTS "equipos" ("id" integer primary key autoincrement not null, "nombre" varchar not null, "evento_id" integer not null, "created_at" datetime, "updated_at" datetime, foreign key("evento_id") references "eventos"("id") on delete cascade);
CREATE TABLE IF NOT EXISTS "participantes" ("id" integer primary key autoincrement not null, "usuario_id" integer not null, "carrera_id" integer not null, "num_control" varchar, "institucion" varchar not null, "created_at" datetime, "updated_at" datetime, "equipo_id" integer, "rol" varchar, foreign key("carrera_id") references carreras("id") on delete cascade on update no action, foreign key("usuario_id") references users("id") on delete cascade on update no action, foreign key("equipo_id") references "equipos"("id") on delete set null);
INSERT INTO participantes VALUES(1,4,1,NULL,'ITO','2025-12-02 00:07:44','2025-12-02 00:07:44',NULL,NULL);
CREATE TABLE IF NOT EXISTS "permissions" ("id" integer primary key autoincrement not null, "name" varchar not null, "guard_name" varchar not null, "created_at" datetime, "updated_at" datetime);
INSERT INTO permissions VALUES(1,'create events','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(2,'edit events','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(3,'delete events','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(4,'create teams','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(5,'edit teams','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(6,'delete teams','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO permissions VALUES(7,'manage users','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
CREATE TABLE IF NOT EXISTS "roles" ("id" integer primary key autoincrement not null, "name" varchar not null, "guard_name" varchar not null, "created_at" datetime, "updated_at" datetime);
INSERT INTO roles VALUES(1,'admin','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO roles VALUES(2,'competidor','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
INSERT INTO roles VALUES(3,'juez','web','2025-12-01 20:49:33','2025-12-01 20:49:33');
CREATE TABLE IF NOT EXISTS "model_has_permissions" ("permission_id" integer not null, "model_type" varchar not null, "model_id" integer not null, foreign key("permission_id") references "permissions"("id") on delete cascade, primary key ("permission_id", "model_id", "model_type"));
CREATE TABLE IF NOT EXISTS "model_has_roles" ("role_id" integer not null, "model_type" varchar not null, "model_id" integer not null, foreign key("role_id") references "roles"("id") on delete cascade, primary key ("role_id", "model_id", "model_type"));
INSERT INTO model_has_roles VALUES(1,'App\Models\User',1);
INSERT INTO model_has_roles VALUES(2,'App\Models\User',2);
INSERT INTO model_has_roles VALUES(3,'App\Models\User',3);
INSERT INTO model_has_roles VALUES(2,'App\Models\User',4);
CREATE TABLE IF NOT EXISTS "role_has_permissions" ("permission_id" integer not null, "role_id" integer not null, foreign key("permission_id") references "permissions"("id") on delete cascade, foreign key("role_id") references "roles"("id") on delete cascade, primary key ("permission_id", "role_id"));
INSERT INTO role_has_permissions VALUES(1,1);
INSERT INTO role_has_permissions VALUES(2,1);
INSERT INTO role_has_permissions VALUES(3,1);
INSERT INTO role_has_permissions VALUES(4,1);
INSERT INTO role_has_permissions VALUES(5,1);
INSERT INTO role_has_permissions VALUES(6,1);
INSERT INTO role_has_permissions VALUES(7,1);
INSERT INTO role_has_permissions VALUES(4,2);
INSERT INTO role_has_permissions VALUES(5,2);
PRAGMA writable_schema=ON;
CREATE TABLE IF NOT EXISTS sqlite_sequence(name,seq);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('migrations',9);
INSERT INTO sqlite_sequence VALUES('participantes',1);
INSERT INTO sqlite_sequence VALUES('roles',3);
INSERT INTO sqlite_sequence VALUES('permissions',7);
INSERT INTO sqlite_sequence VALUES('users',4);
INSERT INTO sqlite_sequence VALUES('carreras',8);
INSERT INTO sqlite_sequence VALUES('eventos',2);
CREATE UNIQUE INDEX "users_email_unique" on "users" ("email");
CREATE INDEX "sessions_user_id_index" on "sessions" ("user_id");
CREATE INDEX "sessions_last_activity_index" on "sessions" ("last_activity");
CREATE INDEX "jobs_queue_index" on "jobs" ("queue");
CREATE UNIQUE INDEX "failed_jobs_uuid_unique" on "failed_jobs" ("uuid");
CREATE UNIQUE INDEX "permissions_name_guard_name_unique" on "permissions" ("name", "guard_name");
CREATE UNIQUE INDEX "roles_name_guard_name_unique" on "roles" ("name", "guard_name");
CREATE INDEX "model_has_permissions_model_id_model_type_index" on "model_has_permissions" ("model_id", "model_type");
CREATE INDEX "model_has_roles_model_id_model_type_index" on "model_has_roles" ("model_id", "model_type");
PRAGMA writable_schema=OFF;
COMMIT;
